<form>
    <fieldset class="form-group">
        <input type="text" ng-model="where" placeholder="Où ?" class="form-control" required />
    </fieldset>

    <fieldset class="form-group">
        <select class="form-control" ng-model="type" ng-options="type for type in types track by type">
            <option value="">Quoi ?</option>
        </select>
    </fieldset>

    <fieldset class="form-group">
        <input type="text" ng-model="what" placeholder="Nom ?" class="form-control" />
    </fieldset>

    <div class="checkbox">
        <label>
            <input type="checkbox" ng-model="wo_hour" /> Sans horaire
        </label>
    </div>

    <button ng-click="search();" class="btn btn-primary">Rechercher</button>
</form>

<div class="alert alert-danger" ng-show="error">{{ error }}</div>

<div class="alert alert-warning" ng-show="!searching && where && nodes.length === 0">Aucun résultat.</div>

<div class="progress">
    <div class="progress-bar" style="width: {{ progress }}%" ng-show="searching"></div>
</div>

<div id="map" ng-show="nodes.length > 0"></div>

<div ng-show="nodes.length > 0">
    {{ nodes.length }} résultats sur {{ allNodes.length }}
</div>

<ul id="list" ng-show="nodes.length > 0">
    <li
        ng-repeat="node in nodes"
        class="{{ node.state }}"
    >
        <div>
            <span class="{{ node.icon }}"></span>
            {{ node.name }}
        </div>
        <div>{{ node.opening_hours }}</div>
        <div ng-if="node.phone">
            <a href="tel:{{ node.phone }}">
                <span class="oc-telephone"></span>
                {{ node.phone }}
            </a>
        </div>
        <div>
            <a href="geo:{{ node.lat }},{{ node.lon }}">
                <span class="oc-guidepost"></span>
                {{ node.lat }}, {{ node.lon }}
            </a>
        </div>
    </li>
</ul>

<div ng-show="nodes.length > 0 && nodes.length < allNodes.length">
    <button ng-click="loadMore();" class="btn btn-primary center-block">Load more</button>
</div>
