<form>
    <fieldset class="form-group">
        <input type="text" ng-model="where" placeholder="Où ?" class="form-control" required />
    </fieldset>

    <fieldset class="form-group">
        <select class="form-control" ng-model="type" ng-options="type for type in types track by type">
            <option value="">Quoi ?</option>
        </select>
    </fieldset>

    <fieldset class="form-group">
        <input type="text" ng-model="what" placeholder="Nom ?" class="form-control" />
    </fieldset>

    <div class="checkbox">
        <label>
            <input type="checkbox" ng-model="wo_hour" /> Sans horaire
        </label>
        <label ng-show="type == 'restaurant'">
            <input type="checkbox" ng-model="vegetarian" /> Végétarien
        </label>
        <label ng-show="type == 'restaurant'">
            <input type="checkbox" ng-model="vegan" /> Vegan
        </label>
    </div>

    <button ng-click="search();" class="btn btn-primary">Rechercher</button>
</form>

<div class="alert alert-danger" ng-show="error">{{ error }}</div>

<div class="alert alert-warning" ng-show="!searching && !error && where && nodes.length === 0">Aucun résultat.</div>

<div class="progress">
    <div class="progress-bar" style="width: {{ progress }}%" ng-show="searching"></div>
</div>

<div id="map" ng-show="nodes.length > 0"></div>

<div ng-show="nodes.length > 0">
    {{ nodes.length }} résultats sur {{ allNodes.length }}
</div>

<ul id="list" ng-show="nodes.length > 0">
    <li
        ng-repeat="node in nodes"
        class="{{ node.state }}"
    >
        <div>
            <span class="{{ node.icon }}"></span>
            {{ node.name }}
            <span class="favorite float-right" ng-click="favorite(node)">
                <img src="img/star.png" ng-if="node.favorite" alt="Favorite" />
                <img src="img/empty-star.png" ng-if="!node.favorite" />
            </span>
            <span class="diet">
                <span ng-if="node.vegan" class="float-right" title="Végétalien">+</span>
                <span ng-if="node.vegetarian || node.vegan" class="float-right" title="Végétarien">V</span>
            </span>
        </div>
        <div>{{ node.opening_hours }}</div>
        <div ng-if="node.phone">
            <a href="tel:{{ node.phone }}">
                <span class="oc-telephone"></span>
                {{ node.phone }}
            </a>
        </div>
        <div>
            <a href="geo:{{ node.lat }},{{ node.lon }}">
                <span class="oc-guidepost"></span>
                {{ node.lat }}, {{ node.lon }}
            </a>
        </div>
    </li>
</ul>

<div ng-show="nodes.length > 0 && nodes.length < allNodes.length">
    <button ng-click="loadMore();" class="btn btn-primary center-block">Load more</button>
</div>
